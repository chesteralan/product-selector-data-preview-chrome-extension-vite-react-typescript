import{j as e,r as p,c as T,R as z}from"./client.js";const L=s=>["ups.thepetlabco.com","ups.thepetlabco.ca","ups.thepetlabco.de","ups.petlabco.co.uk","staging-upsell.netlify.app"].includes(s.location.hostname)||s.location.hostname.includes("upsell"),M=s=>{let r=s.location.pathname;if(L(s)){const n=r.split("/");n.length>2&&n.splice(n.length-1),r=n.join("/")}return r},O=(s,r=!1)=>{const n={"offers.thepetlabco.com":"US","offers.thepetlabco.ca":"CA","offers.thepetlabco.de":"DE","offers.petlabco.co.uk":"UK","d2fccznrf67q1x.amplifyapp.com":"US","d36g79b46uppe6.amplifyapp.com":"CA","d9tzezqsks4u4.amplifyapp.com":"UK"},t={...n,"offer.thepetlabco.com":"US","offer.thepetlabco.ca":"CA","offer.thepetlabco.de":"DE","offer.petlabco.co.uk":"UK","prod-builder-gatsby-funnel.netlify.app":"US","staging-builder-gatsby-funnel.netlify.app":"US","petlab-germany-funnels.netlify.app":"DE","uk-gatsby-funnels.netlify.app":"UK","canada-funnels-production.netlify.app":"CA","ups.thepetlabco.com":"US","ups.thepetlabco.ca":"CA","ups.thepetlabco.de":"DE","ups.petlabco.co.uk":"UK","staging-upsell.netlify.app":"US","us-gatsby-upsell.netlify.app":"US","uk-gatsby-upsell.netlify.app":"UK","ca-gatsby-upsell.netlify.app":"CA","de-gatsby-upsell.netlify.app":"DE"};let c=s.location.hostname;c.includes("--")&&(c=c.split("--")[1]);let i=t[c]||"US";return r&&Object.keys(n).forEach(o=>{c.includes(o)&&(i=n[o])}),i},Z={backgroundColor:"white",borderWidth:"1px 0px 1px 1px",borderTopStyle:"solid",borderRightStyle:"initial",borderLeftStyle:"solid",borderBottomStyle:"solid",borderTopColor:"black",borderRightColor:"initial",borderLeftColor:"black",borderBottomColor:"black",boxShadow:"#CCC 0px 0px 10px 0px",maxWidth:"30px",margin:"5px 0px",padding:"5px",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px",display:"block",fontSize:"18px",lineHeight:"0",cursor:"pointer"},y=({link:s,children:r})=>e.jsx("a",{style:Z,target:"_blank",href:s,children:r}),ee=({productSelectorId:s})=>e.jsx(y,{link:`https://builder.io/content/${s}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336c44.2 0 80-35.8 80-80s-35.8-80-80-80s-80 35.8-80 80s35.8 80 80 80z"})})}),te=({upsell:s,pathname:r})=>e.jsx(y,{link:`${r}${s?"/token":""}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H320zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"})})}),H=(s="US",r=!1,n="live")=>{const t={region:"US",upsell:!1,env:"live",url:"https://offer.thepetlabco.com"},c={region:"US",upsell:!0,env:"live",url:"https://ups.thepetlabco.com"},o=[t,{region:"UK",upsell:!1,env:"live",url:"https://offer.petlabco.co.uk"},{region:"CA",upsell:!1,env:"live",url:"https://offer.thepetlabco.ca"},{region:"DE",upsell:!1,env:"live",url:"https://offer.thepetlabco.de"},{region:"US",upsell:!1,env:"dev",url:"https://funnel-dev.thepetlabco.com"},{region:"UK",upsell:!1,env:"dev",url:"https://offer.petlabco.co.uk"},{region:"CA",upsell:!1,env:"dev",url:"https://offer.thepetlabco.ca"},{region:"DE",upsell:!1,env:"dev",url:"https://offer.thepetlabco.de"},{region:"US",upsell:!1,env:"local",url:"http://localhost:8000"},{region:"UK",upsell:!1,env:"local",url:"http://localhost:8000"},{region:"CA",upsell:!1,env:"local",url:"http://localhost:8000"},{region:"DE",upsell:!1,env:"local",url:"http://localhost:8000"},c,{region:"UK",upsell:!0,env:"live",url:"https://ups.petlabco.co.uk"},{region:"CA",upsell:!0,env:"live",url:"https://ups.thepetlabco.ca"},{region:"DE",upsell:!0,env:"live",url:"https://ups.thepetlabco.de"},{region:"US",upsell:!0,env:"dev",url:"https://staging-upsell.netlify.app"},{region:"UK",upsell:!0,env:"dev",url:"https://ups.petlabco.co.uk"},{region:"CA",upsell:!0,env:"dev",url:"https://ups.thepetlabco.ca"},{region:"DE",upsell:!0,env:"dev",url:"https://ups.thepetlabco.de"},{region:"US",upsell:!0,env:"local",url:"http://localhost:8001"},{region:"UK",upsell:!0,env:"local",url:"http://localhost:8001"},{region:"CA",upsell:!0,env:"local",url:"http://localhost:8001"},{region:"DE",upsell:!0,env:"local",url:"http://localhost:8001"}].find(l=>l.region===s&&l.upsell===r&&l.env===n);return o?o.url:r?c.url:t.url},se=({region:s,upsell:r,pathname:n})=>{const t=H(s,r,"dev");return e.jsx(y,{link:`${t}${n}${r?"/token":""}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:e.jsx("path",{d:"M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"})})})},ne=()=>e.jsx(y,{link:"https://petlab-rebuild-tool.netlify.app/",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M78.6 5C69.1-2.4 55.6-1.5 47 7L7 47c-8.5 8.5-9.4 22-2.1 31.6l80 104c4.5 5.9 11.6 9.4 19 9.4h54.1l109 109c-14.7 29-10 65.4 14.3 89.6l112 112c12.5 12.5 32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3l-112-112c-24.2-24.2-60.6-29-89.6-14.3l-109-109V104c0-7.5-3.5-14.5-9.4-19L78.6 5zM19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L233.7 374.3c-7.8-20.9-9-43.6-3.6-65.1l-61.7-61.7L19.9 396.1zM512 144c0-10.5-1.1-20.7-3.2-30.5c-2.4-11.2-16.1-14.1-24.2-6l-63.9 63.9c-3 3-7.1 4.7-11.3 4.7H352c-8.8 0-16-7.2-16-16V102.6c0-4.2 1.7-8.3 4.7-11.3l63.9-63.9c8.1-8.1 5.2-21.8-6-24.2C388.7 1.1 378.5 0 368 0C288.5 0 224 64.5 224 144l0 .8 85.3 85.3c36-9.1 75.8 .5 104 28.7L429 274.5c49-23 83-72.8 83-130.5zM104 432c0 13.3-10.7 24-24 24s-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24z"})})}),V=({funnelId:s})=>e.jsx(y,{link:`https://builder.io/content/${s}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"})})}),re=({region:s,upsell:r,pathname:n})=>{const t=H(s,r,"live");return e.jsx(y,{link:`${t}${n}${r?"/token":""}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 21 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6H493.4z"})})})},ce=({region:s,upsell:r,pathname:n})=>(H(s,r,"dev"),e.jsx(y,{link:`http://localhost:${r?"8001":"8000"}${n}${r?"/token":""}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:e.jsx("path",{d:"M64 0C28.7 0 0 28.7 0 64V352c0 35.3 28.7 64 64 64H240l-10.7 32H160c-17.7 0-32 14.3-32 32s14.3 32 32 32H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H346.7L336 416H512c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64zM512 64V288H64V64H512z"})})})),oe=({pathname:s,upsell:r})=>e.jsx(y,{link:`/${r?"upsell":"funnel"}-preview?url=${s}${r?"&token=token":""}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:e.jsx("path",{d:"M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"})})}),le={position:"fixed",width:30,top:"calc(50vh - 146px)",right:0,display:"block",zIndex:9999},ie=({funnelId:s,productSelectorId:r})=>{const[n,t]=p.useState(""),[c,i]=p.useState("US"),[o,l]=p.useState(!1);return p.useEffect(()=>{t(M(window)),i(O(window)),l(L(window))},[]),e.jsxs("div",{style:le,children:[e.jsx(V,{funnelId:s}),e.jsx(ee,{productSelectorId:r}),n.includes("funnel-preview")?null:e.jsxs(e.Fragment,{children:[e.jsx(ce,{region:c,upsell:o,pathname:n}),e.jsx(se,{region:c,upsell:o,pathname:n}),e.jsx(re,{region:c,upsell:o,pathname:n}),e.jsx(oe,{region:c,upsell:o,pathname:n}),e.jsx(ne,{}),e.jsx(te,{region:c,upsell:o,pathname:n})]})]})},ae=s=>{var r,n,t,c;return((n=(r=s.result)==null?void 0:r.data)==null?void 0:n.hasOwnProperty("funnelPageData"))||((c=(t=s.result)==null?void 0:t.data)==null?void 0:c.hasOwnProperty("upsellCheckoutData"))||!1},de=s=>{var r,n;return((n=(r=s.result)==null?void 0:r.data)==null?void 0:n.hasOwnProperty("funnelPageData"))||!1},ue=s=>{var r,n;return((n=(r=s.result)==null?void 0:r.data)==null?void 0:n.hasOwnProperty("upsellCheckoutData"))||!1},he=(s="US")=>{switch(s){case"CA":return"en-US";case"GB":return"en-US";case"US":default:return"en-US"}},pe=(s="US")=>{switch(s){case"CA":return"CAD";case"GB":return"GBP";case"US":default:return"USD"}},d=(s,r="US")=>new Intl.NumberFormat(he(r),{style:"currency",currency:pe(r)}).format(s),xe={width:"100%",height:"100%",position:"fixed",top:0,left:0,zIndex:9998},ge={position:"fixed",width:"500px",height:"500px",background:"#fff",border:"1px solid #000",zIndex:9999,borderRadius:"10px",boxShadow:"0 0 10px #5d5d5d",top:"calc(50% - 280px)",left:"calc(50% - 280px)",padding:"30px",overflow:"auto"},w={textDecoration:"line-through"},U={paddingLeft:20,listStyle:"disc"},P={marginBottom:20},je=({data:s,setShow:r})=>{const n=JSON.parse(s.extra);return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:xe,onClick:()=>r(!1)}),e.jsxs("div",{style:ge,children:[e.jsx("h3",{children:"Subscriptions:"}),e.jsxs("p",{children:[e.jsx("u",{children:"Discount Code:"})," ",e.jsx("strong",{children:s.subscription.discounts.join(", ")})]}),e.jsx("p",{children:e.jsx("u",{children:"Products"})}),e.jsx("ul",{style:U,children:s.subscription.products.map((t,c)=>{const i=t.discount_code_override.length>0?t.discount_code_override.join(","):s.subscription.discounts.join(","),o=`https://petlab-rebuild-tool.netlify.app/checkout-data-checker?country=${t.checkoutData.country}&variant_id=${t.checkoutData.variant_id}&discount_code=${i}&quantity=${t.checkoutData.quantity}`;return e.jsxs("li",{style:P,children:[e.jsx("strong",{children:t.checkoutData.title}),e.jsx("br",{}),e.jsx("a",{href:o,target:"_blank",children:t.checkoutData.variant_id})," ","- ",t.checkoutData.quantity,"x -"," ",t.checkoutData.perceived_rrp!==t.checkoutData.discounted_price?e.jsx("span",{style:w,children:d(t.checkoutData.perceived_rrp,t.checkoutData.country)}):null," ",d(t.checkoutData.discounted_price,t.checkoutData.country)," ",e.jsxs("small",{children:["(Savings:"," ",d(t.checkoutData.perceived_rrp-t.checkoutData.discounted_price,t.checkoutData.country)," - ",((t.checkoutData.perceived_rrp-t.checkoutData.discounted_price)/t.checkoutData.perceived_rrp*100).toFixed(0),"%)"]}),e.jsx("br",{}),e.jsxs("strong",{children:["Price per chew"," ",e.jsxs("small",{children:["(",30*t.checkoutData.quantity," chews)"]})]}),":"," ",d(t.checkoutData.discounted_price/(30*t.checkoutData.quantity),t.checkoutData.country)," ",e.jsxs("small",{children:["(Savings:"," ",d((t.checkoutData.perceived_rrp-t.checkoutData.discounted_price)/(30*t.checkoutData.quantity),t.checkoutData.country),")"]}),e.jsx("br",{}),e.jsx("strong",{children:"Price per tub"}),":"," ",d(t.checkoutData.discounted_price/t.checkoutData.quantity,t.checkoutData.country)," ",t.freeGiftData.variantId&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Free Gift"}),":",t.freeGiftData.variantId," ","- ",d(t.free_gift_value,t.checkoutData.country)]}),t.discount_code_override.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("br",{})," ",e.jsx("strong",{children:"Discount Code Override"}),":"," ",t.discount_code_override.join(", ")]}),t.higher_initial_discount.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("br",{})," ",e.jsx("strong",{children:"Higher Initial Discount"}),":"," ",t.higher_initial_discount.join(", ")]}),t.rebill_discount.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("br",{})," ",e.jsx("strong",{children:"Rebill Code"}),":"," ",t.rebill_discount.join(", ")]}),t.priceSettingTag&&e.jsxs(e.Fragment,{children:[e.jsx("br",{})," ",e.jsx("strong",{children:"Price Setting Tag"}),":"," ",t.priceSettingTag]}),t.upsell_url&&e.jsxs(e.Fragment,{children:[e.jsx("br",{})," ",e.jsx("strong",{children:"Upsell URL Override"}),":"," ",e.jsx("small",{children:e.jsx("a",{href:`${t.upsell_url}/token`,target:"_blank",children:t.upsell_url})})]})]},c)})}),e.jsx("p",{children:e.jsx("u",{children:"Bump Offers"})}),e.jsx("ul",{style:U,children:s.subscription.bumpoffers.map((t,c)=>{const i=`https://petlab-rebuild-tool.netlify.app/checkout-data-checker?country=${t.checkoutData.country}&variant_id=${t.checkoutData.variant_id}&discount_code=${t.productRef.product.discountCode}&quantity=1`;return e.jsxs("li",{style:P,children:[e.jsx("strong",{children:t.checkoutData.title}),e.jsx("br",{}),e.jsx("a",{href:i,target:"_blank",children:t.checkoutData.variant_id})," ","- ",t.checkoutData.quantity,"x -"," ",e.jsx("span",{style:w,children:d(t.checkoutData.perceived_rrp,t.checkoutData.country)})," ",d(t.checkoutData.discounted_price,t.checkoutData.country)," ",e.jsxs("small",{children:["(Savings:"," ",d(t.checkoutData.perceived_rrp-t.checkoutData.discounted_price,t.checkoutData.country)," - ",((t.checkoutData.perceived_rrp-t.checkoutData.discounted_price)/t.checkoutData.perceived_rrp*100).toFixed(2),"%)"]})," ",e.jsx("br",{})," ",e.jsx("strong",{children:"Discount Code"}),":"," ",t.productRef.product.discountCode,t.higher_initial_discount&&e.jsxs(e.Fragment,{children:[e.jsx("br",{})," ",e.jsx("strong",{children:"Higher Initial Discount"}),":"," ",t.higher_initial_discount]}),t.rebill_discount&&e.jsxs(e.Fragment,{children:[e.jsx("br",{})," ",e.jsx("strong",{children:"Rebill Code"}),":"," ",t.rebill_discount]})]},c)})}),e.jsx("hr",{}),e.jsx("h3",{children:"Onetime:"}),e.jsxs("p",{children:[e.jsx("u",{children:"Discount Code:"})," ",e.jsx("strong",{children:s.onetime.discounts.join(", ")})]}),e.jsx("p",{children:e.jsx("u",{children:"Products"})}),e.jsx("ul",{style:U,children:s.onetime.products.map((t,c)=>{const i=`https://petlab-rebuild-tool.netlify.app/checkout-data-checker?country=${t.checkoutData.country}&variant_id=${t.checkoutData.variant_id}&discount_code=${s.subscription.discounts.join(",")}&quantity=${t.checkoutData.quantity}`;return e.jsxs("li",{style:P,children:[e.jsx("strong",{children:t.checkoutData.title}),e.jsx("br",{}),e.jsx("a",{href:i,target:"_blank",children:t.checkoutData.variant_id})," ","- ",t.checkoutData.quantity,"x -"," ",t.checkoutData.perceived_rrp!==t.checkoutData.discounted_price?e.jsx("span",{style:w,children:d(t.checkoutData.perceived_rrp,t.checkoutData.country)}):null," ",d(t.checkoutData.discounted_price,t.checkoutData.country)," ",e.jsxs("small",{children:["(Savings:"," ",d(t.checkoutData.perceived_rrp-t.checkoutData.discounted_price,t.checkoutData.country)," - ",((t.checkoutData.perceived_rrp-t.checkoutData.discounted_price)/t.checkoutData.perceived_rrp*100).toFixed(0),"%)"]}),e.jsx("br",{}),e.jsxs("strong",{children:["Price per chew"," ",e.jsxs("small",{children:["(",30*t.checkoutData.quantity," chews)"]})]}),":"," ",d(t.checkoutData.discounted_price/(30*t.checkoutData.quantity),t.checkoutData.country)," ",e.jsxs("small",{children:["(Savings:"," ",d((t.checkoutData.perceived_rrp-t.checkoutData.discounted_price)/(30*t.checkoutData.quantity),t.checkoutData.country),")"]}),e.jsx("br",{}),e.jsx("strong",{children:"Price per tub"}),":"," ",d(t.checkoutData.discounted_price/t.checkoutData.quantity,t.checkoutData.country)," ",t.upsell_url&&e.jsxs(e.Fragment,{children:[e.jsx("br",{})," ",e.jsx("strong",{children:"Upsell URL Override"}),":"," ",e.jsx("small",{children:e.jsx("a",{href:`${t.upsell_url}/token`,target:"_blank",children:t.upsell_url})})]})]},c)})}),e.jsx("p",{children:e.jsx("u",{children:"Bump Offers"})}),e.jsx("ul",{style:U,children:s.onetime.bumpoffers.map((t,c)=>{const i=`https://petlab-rebuild-tool.netlify.app/checkout-data-checker?country=${t.checkoutData.country}&variant_id=${t.checkoutData.variant_id}&discount_code=${t.productRef.product.discountCode}&quantity=1`;return e.jsxs("li",{style:P,children:[e.jsx("strong",{children:t.checkoutData.title}),e.jsx("br",{}),e.jsx("a",{href:i,target:"_blank",children:t.checkoutData.variant_id})," ","- ",t.checkoutData.quantity,"x -"," ",e.jsx("span",{style:w,children:d(t.checkoutData.perceived_rrp,t.checkoutData.country)})," ",d(t.checkoutData.discounted_price,t.checkoutData.country)," ",e.jsxs("small",{children:["(Savings:"," ",d(t.checkoutData.perceived_rrp-t.checkoutData.discounted_price,t.checkoutData.country)," - ",((t.checkoutData.perceived_rrp-t.checkoutData.discounted_price)/t.checkoutData.perceived_rrp*100).toFixed(2),"%)"]})," ",e.jsx("br",{})," ",e.jsx("strong",{children:"Discount Code"}),":"," ",t.productRef.product.discountCode,t.higher_initial_discount&&e.jsxs(e.Fragment,{children:[e.jsx("br",{})," ",e.jsx("strong",{children:"Higher Initial Discount"}),":"," ",t.higher_initial_discount]}),t.rebill_discount&&e.jsxs(e.Fragment,{children:[e.jsx("br",{})," ",e.jsx("strong",{children:"Rebill Code"}),":"," ",t.rebill_discount]})]},c)})}),e.jsxs("p",{children:[e.jsx("u",{children:"Upsell URL:"})," ",e.jsx("strong",{children:e.jsx("a",{href:`${s.upsell}/token`,target:"_blank",rel:"noreferrer",children:s.upsell})})]}),e.jsxs("p",{children:[e.jsx("u",{children:"Currency:"})," ",e.jsxs("strong",{children:[s.currency.code," - ",s.currency.symbol]})]}),e.jsx("p",{children:e.jsx("u",{children:"Extra:"})}),e.jsx("ul",{children:Object.keys(n).map(t=>e.jsxs("li",{children:[t,": ",e.jsx("strong",{children:n[t]})]},t))})]})]})},be={width:"100%",height:"100%",position:"fixed",top:0,left:0,zIndex:9998},fe={position:"fixed",width:"500px",height:"500px",background:"#fff",border:"1px solid #000",zIndex:9999,borderRadius:"10px",boxShadow:"0 0 10px #5d5d5d",top:"calc(50% - 280px)",left:"calc(50% - 280px)",padding:"30px",overflow:"auto"},ye=({data:s,setShow:r})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:be,onClick:()=>r(!1)}),e.jsxs("div",{style:fe,children:[e.jsx("h3",{children:"Offers:"}),e.jsx("ul",{children:s.offers.map((n,t)=>{var o,l,x,u,h,a,g,j,b;const c=((o=n.checkoutData)==null?void 0:o.price)-((l=n.checkoutData)==null?void 0:l.discounted_price),i=c/((x=n.checkoutData)==null?void 0:x.price)*100;return e.jsxs("li",{style:{paddingBottom:"20px"},children:[e.jsx("strong",{children:"Offer ID"}),": ",n.offerId," ",e.jsx("br",{}),e.jsx("strong",{children:"Product Name"}),": ",n.productName,e.jsx("br",{}),e.jsx("strong",{children:"Checkout Title"}),": ",(u=n.checkoutData)==null?void 0:u.title,e.jsx("br",{}),e.jsx("strong",{children:"Checkout Variant ID"}),":"," ",(h=n.checkoutData)==null?void 0:h.variant_id,e.jsx("br",{}),e.jsx("strong",{children:"Quantity"}),": ",(a=n.checkoutData)==null?void 0:a.quantity,e.jsx("br",{}),e.jsx("strong",{children:"Retail Price"}),": ",s.currency.symbol,(g=n.checkoutData)==null?void 0:g.price,e.jsx("br",{}),e.jsx("strong",{children:"Perceived Retail Price"}),": ",s.currency.symbol,(j=n.checkoutData)==null?void 0:j.perceived_rrp,e.jsx("br",{}),e.jsx("strong",{children:"Discounted Price"}),": ",s.currency.symbol,(b=n.checkoutData)==null?void 0:b.discounted_price,e.jsx("br",{}),e.jsx("strong",{children:"Savings"}),": ",s.currency.symbol,c.toFixed(2)," ",e.jsxs("small",{children:["(",i.toFixed(2),"%)"]}),e.jsx("br",{})," ",e.jsx("strong",{children:"Discount Code"}),": ",n.discountCode,e.jsx("br",{})," ",e.jsx("strong",{children:"Discount Rate"}),": ",n.discountRate,"%",e.jsx("br",{})," ",e.jsx("strong",{children:"Display Title"}),": ",n.displayTitle,e.jsx("br",{})," ",e.jsx("strong",{children:"Next Index (Accepted)"}),":"," ",n.nextIndexYes,e.jsx("br",{})," ",e.jsx("strong",{children:"Next Index (Declined)"}),":"," ",n.nextIndexNo,e.jsx("br",{})," ",e.jsx("strong",{children:"Tag"}),": ",n.tag]},t)})}),e.jsx("hr",{}),e.jsxs("p",{children:[e.jsx("u",{children:"Currency:"})," ",e.jsxs("strong",{children:[s.currency.code," - ",s.currency.symbol]})]}),e.jsxs("p",{children:[e.jsx("u",{children:"Store:"})," ",e.jsx("strong",{children:s.store})]})]})]}),me={fontFamily:"sans-serif",cursor:"pointer",borderWidth:"1px 1px 0px",borderTopStyle:"solid",borderRightStyle:"solid",borderLeftStyle:"solid",borderTopColor:"rgb(0, 0, 0)",borderRightColor:"rgb(0, 0, 0)",borderLeftColor:"rgb(0, 0, 0)",borderImage:"initial",marginLeft:"10px",borderBottomStyle:"initial",borderBottomColor:"initial",padding:"10px 10px 5px",background:"rgb(0, 28, 114)",borderRadius:"10px 10px 0px 0px",color:"rgb(255, 255, 255)",position:"fixed",bottom:"0px",left:"0px",zIndex:9999},ve=s=>{var a,g,j,b,f;const[r,n]=p.useState(!1),[t,c]=p.useState(!1),[i,o]=p.useState(!1),[l,x]=p.useState(!1),[u,h]=p.useState(null);return p.useEffect(()=>{const k=M(window);if(k.length<=1)return()=>{};const C=`/page-data${k}/page-data.json`;try{fetch(C).then(async m=>{const D=await m.json();n(ae(D)),h(D),o(L(window)&&ue(D)),x(!L(window)&&de(D))}).catch(m=>{console.error("Error:",m)})}catch(m){console.log(m)}},[]),r?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:me,onClick:()=>c(!t),children:"Product Data"}),t?e.jsxs(e.Fragment,{children:[i?e.jsx(ye,{data:(g=(a=u.result)==null?void 0:a.data)==null?void 0:g.upsellCheckoutData,setShow:c}):null,l?e.jsx(je,{data:(f=(b=(j=u.result)==null?void 0:j.data)==null?void 0:b.funnelPageData)==null?void 0:f.productSelector,setShow:c}):null]}):null]}):null};function ke(s){return e.jsxs(e.Fragment,{children:[e.jsx(ie,{...s}),e.jsx(ve,{})]})}const G=({link:s})=>e.jsx(y,{link:s,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:e.jsx("path",{d:"M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"})})}),De={position:"fixed",width:30,top:"30vh",right:0,display:"block",zIndex:9999},Se=({entryId:s})=>{const[r,n]=p.useState([]);return p.useEffect(()=>{const t=document.getElementsByTagName("a"),c=Array.from(new Set(Array.from(t).map(i=>{if(/^(https:\/\/offer\.(thepetlabco\.com|petlabco\.co\.uk|thepetlabco\.de|thepetlabco\.ca))/g.test(i.href))return i.href}).filter(Boolean)));c.length>0&&(console.log(`CTAs Found: ${c}`),n(c))},[n]),e.jsxs("div",{style:De,children:[e.jsx(V,{funnelId:s}),r.map(t=>e.jsx(G,{link:t}))]})};function Ce(s){return e.jsx(e.Fragment,{children:e.jsx(Se,{...s})})}const _e={position:"fixed",width:30,top:"30vh",right:0,display:"block",zIndex:9999},we=s=>{const[r,n]=p.useState([]);return p.useEffect(()=>{const t=document.getElementsByTagName("a"),c=Array.from(new Set(Array.from(t).map(i=>{if(/(\/\/offer\.thepetlabco\.com|\/\/offer\.thepetlabco\.ca|\/\/offer\.thepetlabco\.de|\/\/offer\.petlabco\.co\.uk|\/\/offers\.thepetlabco\.com|\/\/offers\.thepetlabco\.ca|\/\/offers\.thepetlabco\.de|\/\/offers\.petlabco\.co\.uk)/g.test(i.href))return i.href}).filter(Boolean)));c.length>0&&(console.log(`CTAs Found: ${c}`),n(c))},[n]),e.jsx("div",{style:_e,children:r.map(t=>e.jsx(G,{link:t}))})};function Ue(s){return e.jsx(e.Fragment,{children:e.jsx(we,{...s})})}const K={width:"100%",height:"100%",position:"fixed",top:0,left:0,zIndex:9998,backgroundColor:"#CCC",opacity:.5},J={position:"fixed",width:"700px",height:"500px",background:"#fff",border:"1px solid #000",zIndex:9999,borderRadius:"10px",boxShadow:"0 0 10px #5d5d5d",top:"calc(50% - 250px)",left:"calc(50% - 350px)",padding:"30px",overflow:"auto",fontFamily:"sans-serif",fontSize:"12px"},W={paddingLeft:20,listStyle:"disc"},Y={marginBottom:20},I={textDecoration:"underline"},Pe={marginTop:20,display:"flex",justifyContent:"space-between",gap:"15px"},Q={padding:10,border:"1px solid #000",cursor:"pointer",borderRadius:"10px",width:"calc(1/3 * 100%)",textAlign:"center"},$e={...Q,backgroundColor:"#CCC",fontWeight:"bold"},Le={marginTop:10,padding:15,borderRadius:"10px",backgroundColor:"#f7f7f7",position:"relative"},Ie={marginTop:10,padding:15,borderRadius:"10px",backgroundColor:"#f7f7f7"},Ee={position:"absolute",right:10,top:10},Fe="US",Be="CA",Te="UK",N=()=>{const[s,r]=p.useState(null),[n,t]=p.useState(null),[c,i]=p.useState(null),[o,l]=p.useState(null),[x,u]=p.useState(null);return p.useEffect(()=>{switch(chrome.storage.local.get(["nextjsLocalUrl","developerToolUrl"]).then(a=>{l(a.nextjsLocalUrl),u(a.developerToolUrl)}),O(window,!0)||"US"){case Fe:chrome.storage.local.get(["usStrapiServerUrl","usNextjsStagingUrl","usNextjsLiveUrl"]).then(a=>{r(a.usStrapiServerUrl),t(a.usNextjsStagingUrl),i(a.usNextjsLiveUrl)});break;case Be:chrome.storage.local.get(["caStrapiServerUrl","caNextjsStagingUrl","caNextjsLiveUrl"]).then(a=>{r(a.caStrapiServerUrl),t(a.caNextjsStagingUrl),i(a.caNextjsLiveUrl)});break;case Te:chrome.storage.local.get(["ukStrapiServerUrl","ukNextjsStagingUrl","ukNextjsLiveUrl"]).then(a=>{r(a.ukStrapiServerUrl),t(a.ukNextjsStagingUrl),i(a.ukNextjsLiveUrl)});break}},[]),{strapiServerUrl:s,stagingUrl:n,localUrl:o,liveUrl:c,devToolUrl:x}},E=({productId:s,prices:r,discountCodes:n,upsellUrl:t})=>{const{devToolUrl:c,strapiServerUrl:i}=N(),o=()=>{window.open(`${i}/admin/content-manager/collectionType/api::product.product/${s}`,"_blank")};return e.jsxs("div",{style:Le,children:[e.jsx("a",{href:"#",style:Ee,onClick:o,children:"Edit Product"}),e.jsxs("p",{children:[e.jsx("u",{children:"Upsell URL:"})," ",e.jsx("strong",{children:e.jsx("a",{href:`${t}/token`,target:"_blank",style:I,children:t})})]}),e.jsx("p",{children:e.jsx("u",{children:"Products"})}),e.jsx("ul",{style:W,children:r.map((l,x)=>{const u=`${c}/checkout-data-checker?country=${l.country}&variant_id=${l.variant_id}&discount_code=${n}&quantity=${l.quantity}`;return e.jsxs("li",{style:Y,children:[e.jsx("strong",{children:"Name"}),": ",l.title,e.jsx("br",{}),e.jsx("strong",{children:"Variant ID"}),":"," ",e.jsx("a",{href:u,target:"_blank",style:I,children:l.variant_id}),e.jsx("br",{}),e.jsx("strong",{children:"Quantity"}),": ",l.quantity,e.jsx("br",{}),e.jsx("strong",{children:"RRP"}),":"," ",d(l.perceived_rrp,l.country),e.jsx("br",{}),e.jsx("strong",{children:"Sales Price"}),":"," ",d(l.discounted_price,l.country),e.jsx("br",{}),e.jsx("strong",{children:"Savings"}),":"," ",d(l.perceived_rrp-l.discounted_price,l.country)," "," - ",e.jsxs("small",{children:[((l.perceived_rrp-l.discounted_price)/l.perceived_rrp*100).toFixed(2),"%"]}),e.jsx("br",{}),e.jsxs("strong",{children:["Price per chew ",e.jsxs("small",{children:["(",30*l.quantity," chews)"]})]}),":"," ",d(l.discounted_price/(30*l.quantity),l.country)," ",e.jsxs("small",{children:["(Savings:"," ",d((l.perceived_rrp-l.discounted_price)/(30*l.quantity),l.country),")"]}),e.jsx("br",{}),e.jsx("strong",{children:"Price per tub"}),":"," ",d(l.discounted_price/l.quantity,l.country),e.jsx("br",{})]},x)})})]})},F=({bumpOffers:s})=>{const{devToolUrl:r,strapiServerUrl:n}=N(),t=o=>{window.open(`${n}/admin/content-manager/collectionType/api::bump-offer.bump-offer/${o}`,"_blank")},c=o=>{window.open(`${n}/admin/content-manager/collectionType/api::product.product/${o}`,"_blank")},i=(o,l)=>{window.open(`${r}/checkout-data-checker?variant_id=${o}&discount_code=${l}&quantity=1`,"_blank")};return e.jsxs("div",{style:Ie,children:[e.jsx("p",{children:e.jsx("u",{children:"Bump Offers"})}),e.jsx("p",{children:e.jsx("ul",{style:W,children:s.map((o,l)=>{const x=o.discountCode.code,u=o.id,h=o.product.id;return e.jsxs("li",{style:Y,children:[e.jsx("strong",{children:"Name"}),": ",o.label,e.jsx("br",{}),e.jsx("strong",{children:"SUB Variant ID"}),":"," ",e.jsx("a",{href:"#",onClick:()=>i(o.subscriptionVariantID,x),style:I,children:o.subscriptionVariantID}),e.jsx("br",{}),e.jsx("strong",{children:"OTP Variant ID"}),":"," ",e.jsx("a",{href:"#",onClick:()=>i(o.otpVariantID,x),style:I,children:o.otpVariantID}),e.jsx("br",{}),e.jsx("strong",{children:"Quantity"}),": 1",e.jsx("br",{}),e.jsx("strong",{children:"RRP"}),": ",d(o.price.rrp),e.jsx("br",{}),e.jsx("strong",{children:"Sales Price"}),":"," ",d(o.price.salePrice),e.jsx("br",{}),e.jsx("strong",{children:"Savings"}),":"," ",d(o.price.rrp-o.price.salePrice)," "," - ",e.jsxs("small",{children:[((o.price.rrp-o.price.salePrice)/o.price.rrp*100).toFixed(2),"%"]}),e.jsx("br",{})," ",e.jsx("strong",{children:"Discount Code"}),": ",x,e.jsx("br",{})," ",e.jsxs("small",{children:[e.jsx("a",{href:"#",onClick:()=>t(u),children:"Edit Bump Offer"})," ","·"," ",e.jsx("a",{href:"#",onClick:()=>c(h),children:"Edit Product"})]})]},l)})})})]})},S="SUB",ze="Subscription",B="OTP",Re="Onetime",He={display:"flex",justifyContent:"center",borderRadius:10,overflow:"hidden",position:"sticky",top:-20,zIndex:1},$={padding:10,minWidth:150,border:"1px solid #e5e7eb",textAlign:"center",cursor:"pointer",backgroundColor:"#FFF"},q={backgroundColor:"#e5e7eb",fontWeight:"bold"},X=({selected:s=S,setSelected:r})=>e.jsxs("div",{style:He,children:[e.jsx("div",{style:s===S?{...$,...q}:$,onClick:()=>r(S),children:ze}),e.jsx("div",{style:s===B?{...$,...q}:$,onClick:()=>r(B),children:Re})]}),Ne=s=>{const[r,n]=p.useState(S),{setShow:t,discountCodes:c,rebillDiscountCode:i,higherInitialDiscountCode:o,subBumpOffers:l,otpBumpOffers:x,product:u}=s,h=u.id,a=u.prices.otpPrices,g=u.prices.subPrices,j=u.subUpsellUrl,b=u.otpUpsellUrl,f=u.klaviyoListId;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:K,onClick:()=>t(!1)}),e.jsxs("div",{style:J,children:[e.jsxs("p",{children:[e.jsx("u",{children:"Discount Code:"})," ",e.jsx("strong",{children:c})]}),i&&e.jsxs("p",{children:[e.jsx("u",{children:"Rebill Discount Code:"})," ",e.jsx("strong",{children:i})]}),o&&e.jsxs("p",{children:[e.jsx("u",{children:"Higher Initial Discount Code:"})," ",e.jsx("strong",{children:o})]}),e.jsxs("p",{children:[e.jsx("u",{children:"Klaviyo List ID:"})," ",e.jsx("strong",{children:f})]}),e.jsx("br",{}),e.jsx(X,{selected:r,setSelected:n}),e.jsx("br",{}),e.jsx("hr",{}),r===S&&e.jsxs(e.Fragment,{children:[e.jsx(E,{prices:g,discountCodes:c,upsellUrl:j,productId:h}),e.jsx(F,{bumpOffers:l})]}),r===B&&e.jsxs(e.Fragment,{children:[e.jsx(E,{prices:a,discountCodes:c,upsellUrl:b,productId:h}),e.jsx(F,{bumpOffers:x})]})]})]})},Ae=({products:s,currentProduct:r=0,setCurrentProduct:n})=>e.jsx("div",{style:Pe,children:s.map((t,c)=>e.jsx("div",{style:r===c?$e:Q,onClick:()=>n(c),children:t.name},c))}),qe=s=>{const[r,n]=p.useState(0),[t,c]=p.useState(S),{setShow:i,discountCodes:o,rebillDiscountCode:l,higherInitialDiscountCode:x,subBumpOffers:u,otpBumpOffers:h,products:a}=s,g=a[r].id,j=a[r].prices.otpPrices,b=a[r].prices.subPrices,f=a[r].subUpsellUrl,k=a[r].otpUpsellUrl,C=a[r].klaviyoListId;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:K,onClick:()=>i(!1)}),e.jsxs("div",{style:J,children:[e.jsxs("p",{children:[e.jsx("u",{children:"Discount Code:"})," ",e.jsx("strong",{children:o})]}),l&&e.jsxs("p",{children:[e.jsx("u",{children:"Rebill Discount Code:"})," ",e.jsx("strong",{children:l})]}),x&&e.jsxs("p",{children:[e.jsx("u",{children:"Higher Initial Discount Code:"})," ",e.jsx("strong",{children:x})]}),e.jsxs("p",{children:[e.jsx("u",{children:"Klaviyo List ID:"})," ",e.jsx("strong",{children:C})]}),e.jsx(Ae,{products:a,setCurrentProduct:n,currentProduct:r}),e.jsx("br",{}),e.jsx(X,{selected:t,setSelected:c}),e.jsx("br",{}),e.jsx("hr",{}),t===S&&e.jsxs(e.Fragment,{children:[e.jsx(E,{prices:b,discountCodes:o,upsellUrl:f,productId:g}),e.jsx(F,{bumpOffers:u})]}),t===B&&e.jsxs(e.Fragment,{children:[e.jsx(E,{prices:j,discountCodes:o,upsellUrl:k,productId:g}),e.jsx(F,{bumpOffers:h})]})]})]})},Me=({data:s,setShow:r})=>{var a,g,j,b;const n=(a=s.props.pageProps)==null?void 0:a.page;if(!n)return null;const t=((g=n.products)==null?void 0:g.length)>1||!1,c=n.productDiscountCode.code,i=(j=n.rebillDiscountCode)==null?void 0:j.code,o=(b=n.higherInitialDiscountCode)==null?void 0:b.code,l=n.otpBumpOffers,x=n.subBumpOffers,u=s.locales,h=s.query.slug;return t?e.jsx(qe,{setShow:r,discountCodes:c,rebillDiscountCode:i,higherInitialDiscountCode:o,otpBumpOffers:l,subBumpOffers:x,products:n.products,locales:u,slug:h}):e.jsx(Ne,{setShow:r,discountCodes:c,rebillDiscountCode:i,higherInitialDiscountCode:o,otpBumpOffers:l,subBumpOffers:x,product:n.products[0],locales:u,slug:h})},Oe={position:"fixed",background:"#2196F3",border:"1px solid #000",borderTop:"none",zIndex:9999,borderRadius:"0 0 5px 5px",boxShadow:"0 0 5px #5d5d5d",top:0,left:"50%",transform:"translateX(-50%)",padding:"5px",overflow:"auto",fontSize:10,color:"#FFF",fontFamily:"sans-serif",width:"max-content"},v={color:"#FFF",padding:"0 5px",textDecoration:"none",textTransform:"uppercase",cursor:"pointer"},Ve=({data:s})=>{var g,j,b,f,k,C,m,D,A;const{strapiServerUrl:r,stagingUrl:n,localUrl:t,liveUrl:c}=N(),i=s.locale,o=s.locales,l=(j=(g=s.props.pageProps)==null?void 0:g.page)==null?void 0:j.id,x=(f=(b=s.props.pageProps)==null?void 0:b.pageVariant)==null?void 0:f.id,u=(m=(C=(k=s.props.pageProps)==null?void 0:k.page)==null?void 0:C.promo)==null?void 0:m.id,h=((D=s.query)==null?void 0:D.slug)||null,a=((A=s.query)==null?void 0:A.variant)||null;return e.jsxs("div",{style:Oe,children:[r&&e.jsxs(e.Fragment,{children:[e.jsx("a",{href:`${r}/admin`,target:"_blank",style:v,children:"Admin Panel"}),"|",l&&e.jsx("a",{href:`${r}/admin/content-manager/collectionType/api::page.page/${l}?plugins[i18n][locale]=${i}`,target:"_blank",style:v,children:"Edit Page"}),x&&e.jsx("a",{href:`${r}/admin/content-manager/collectionType/api::page-variant.page-variant/${x}?plugins[i18n][locale]=${i}`,target:"_blank",style:v,children:"Edit Variant"}),u&&e.jsx("a",{href:`${r}/admin/content-manager/collectionType/api::promo.promo/${u}?plugins[i18n][locale]=${i}`,target:"_blank",style:v,children:"Edit Promo"}),"|",h&&o.map(R=>R!==i&&e.jsx("a",{href:`/${R}/${h}${a?`/${a}`:""}`,style:v,children:R}))]}),"|",n&&h&&e.jsx(e.Fragment,{children:e.jsx("a",{href:`${n}/${h}${a?`/${a}`:""}`,style:v,children:"Staging"})}),t&&h&&e.jsx(e.Fragment,{children:e.jsx("a",{href:`${t}/${h}${a?`/${a}`:""}`,style:v,children:"Local"})}),c&&h&&e.jsx(e.Fragment,{children:e.jsx("a",{href:`${c}/${h}${a?`/${a}`:""}`,style:v,children:"Live"})})]})},Ge={fontFamily:"sans-serif",cursor:"pointer",borderWidth:"1px 1px 0px",borderTopStyle:"solid",borderRightStyle:"solid",borderLeftStyle:"solid",borderTopColor:"rgb(0, 0, 0)",borderRightColor:"rgb(0, 0, 0)",borderLeftColor:"rgb(0, 0, 0)",borderImage:"initial",marginLeft:"10px",borderBottomStyle:"initial",borderBottomColor:"initial",padding:"8px 8px 5px",background:"#2196F3",borderRadius:"10px 10px 0px 0px",color:"rgb(255, 255, 255)",position:"fixed",bottom:"0px",left:"0px",zIndex:9999,fontSize:12},Ke=s=>{var i;const{data:r}=s,[n,t]=p.useState(!1),c=(i=r.props.pageProps)==null?void 0:i.page;return e.jsxs(e.Fragment,{children:[c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:Ge,onClick:()=>t(!n),children:"Product Data"}),n?e.jsx(e.Fragment,{children:e.jsx(Me,{data:r,setShow:t})}):null]}),e.jsx(Ve,{data:r})]})};function Je(s){const{data:r}=s;return e.jsx(e.Fragment,{children:e.jsx(Ke,{data:r})})}const We=["promo.thepetlabco.com","campaigns.thepetlabco.com","d2e88n5gsw7jf3.amplifyapp.com"],_=()=>{console.log("Clearing intervals..."),window.petLabChromeExtGatsby&&clearInterval(window.petLabChromeExtGatsby),window.petLabChromeExtBuilder&&clearInterval(window.petLabChromeExtBuilder),window.petLabChromeExtPromo&&clearInterval(window.petLabChromeExtPromo),window.petLabChromeExtNextJs&&clearInterval(window.petLabChromeExtNextJs)},Ye=()=>{window.petLabChromeExtGatsby=setInterval(()=>{if(document.getElementById("___gatsby")){console.log("Gatsby.js Found!");const r=document.getElementsByTagName("meta"),n=r.namedItem("funnel-id"),t=r.namedItem("product-selector-id");if(n&&t){console.log("PetLab Funnel detected...");const c=document.createElement("div");T.createRoot(c).render(e.jsx(z.StrictMode,{children:e.jsx(ke,{funnelId:n==null?void 0:n.content,productSelectorId:t==null?void 0:t.content})})),document.body.appendChild(c),_()}}},1e3)},Qe=()=>{window.petLabChromeExtBuilder=setInterval(()=>{const s=document.getElementsByTagName("builder-component");if(s.length>0){console.log("Builder Page detected...");const[r]=s,n=r.getAttribute("entry"),t=document.createElement("div");T.createRoot(t).render(e.jsx(z.StrictMode,{children:e.jsx(Ce,{entryId:n})})),document.body.appendChild(t),_()}},1e3)},Xe=()=>{window.petLabChromeExtPromo=setInterval(()=>{if(We.some(s=>window.origin.includes(s))){console.log("Presell Site detected...");const s=document.createElement("div");T.createRoot(s).render(e.jsx(z.StrictMode,{children:e.jsx(Ue,{})})),document.body.appendChild(s),_()}},1e3)},Ze=()=>{window.petLabChromeExtNextJs=setInterval(()=>{if(document.getElementById("__next")){console.log("Next.js Found!");const r=document.getElementById("__NEXT_DATA__");console.log("PetLab Next.js Funnel detected...",JSON.parse(r.outerText));const n=document.createElement("div");T.createRoot(n).render(e.jsx(z.StrictMode,{children:e.jsx(Je,{data:JSON.parse(r.outerText)})})),document.body.appendChild(n),_()}},1e3)};Ye();Qe();Xe();Ze();setTimeout(()=>{_()},1e4);
